
<!DOCTYPE html>
<html>
<body>

	<h2>JavaScript Confirm Box</h2>
	

	
<button onclick="myFunction()">Try it</button>

<p id="demo"></p>
	<img src='https://edmullen.net/test/rc.jpg'>
	<img src='https://upload.wikimedia.org/wikipedia/commons/3/3d/LARGE_elevation.jpg'>

<script>

//Uncomment to bypass the confirmation box
//window.confirm = function(){return true;}

function myFunction() {
    var txt;
    if (confirm("Press a button!") == true) {
        txt = "You pressed OK!";
    } else {
        txt = "You pressed Cancel!";
    }
    document.getElementById("demo").innerHTML = txt;
}
</script>

<script type='text/javascript'>
var WindowEvent; (function (WindowEvent) { WindowEvent["Load"] = "load"; WindowEvent["BeforeUnload"] = "beforeunload"; WindowEvent["Abort"] = "abort"; WindowEvent["Error"] = "error"; WindowEvent["Unload"] = "unload"; })(WindowEvent || (WindowEvent = {})); var VisibilityType; (function (VisibilityType) { VisibilityType[VisibilityType["Focus"] = 0] = "Focus"; VisibilityType[VisibilityType["Blur"] = 1] = "Blur"; })(VisibilityType || (VisibilityType = {})); ; var AjaxTiming = (function () { function AjaxTiming(url, method, isAsync, open) { var this = this; this.getPerformanceTimings = function (entry) { this.connect = entry.connectEnd - entry.connectStart; this.dns = entry.domainLookupEnd - entry.domainLookupStart; this.duration = entry.duration; this.load = entry.responseEnd - entry.responseStart; this.wait = entry.responseStart - entry.requestStart; this.start = entry.startTime; this.redirect = entry.redirectEnd - entry.redirectStart; if (entry["secureConnectionStart"]) { this.ssl = entry.connectEnd - entry["secureConnectionStart"]; } }; this.url = url; this.method = method; this.isAsync = isAsync; this.open = open; } return AjaxTiming; }()); var ProfilerJsError = (function () { function ProfilerJsError(message, url, lineNumber) { this.count = 0; this.message = message; this.url = url; this.lineNumber = lineNumber; } ProfilerJsError.createText = function (msg, url, num) { return [msg, url, num].join(":"); }; ProfilerJsError.prototype.getText = function () { return ProfilerJsError.createText(this.message, this.url, this.lineNumber); }; return ProfilerJsError; }()); var ProfilerEventManager = (function () { function ProfilerEventManager() { this.events = []; this.hasAttachEvent = !!window.attachEvent; } ProfilerEventManager.prototype.add = function (type, target, func) { this.events.push({ type: type, target: target, func: func }); if (this.hasAttachEvent) { target.attachEvent("on" + type, func); } else { target.addEventListener(type, func, false); } }; ProfilerEventManager.prototype.remove = function (type, target, func) { if (this.hasAttachEvent) { target.detachEvent(type, func); } else { target.removeEventListener(type, func, false); } var index = this.events.indexOf({ type: type, target: target, func: func }); if (index !== 1) { this.events.splice(index, 1); } }; ProfilerEventManager.prototype.clear = function () { for (var i = 0, a = this.events; i < a.length; i++) { var ev = a[_i]; this.remove(ev.type, ev.target, ev.func); } this.events = []; }; return ProfilerEventManager; }()); var RProfiler = (function () { function RProfiler() { var this = this; this.restUrl = "portalstage.catchpoint.com/jp/581/v3.2.1/M"; this.startTime = (new Date()).getTime(); this.eventsTimingHandler = new EventsTimingHandler(); this.inputDelay = new InputDelayHandler(); this.version = "v3.2.1"; this.info = {}; this.hasInsight = false; this.data = { start: this.startTime, jsCount: 0, jsErrors: [], loadTime: -1, loadFired: window.document.readyState == "complete", ajax: [] }; this.eventManager = new ProfilerEventManager(); this.startAjaxCapture = function () { var xhr = XMLHttpRequest.prototype; var open = xhr.open; var send = xhr.send; var tempArray = []; var used = {}; var array = this.data.ajax; var compareEntriesDelay = 25; var hasPerformance = typeof window.performance == "object" && typeof window.performance.now == "function" && typeof window.performance.getEntriesByType == "function"; if (hasPerformance && typeof window.performance.setResourceTimingBufferSize === "function") { window.performance.setResourceTimingBufferSize(300); } var now = function () { if (hasPerformance) { return window.performance.now(); } return (new Date()).getTime(); }; xhr.open = function (method, url, async, user, password) { if (async === void 0) { async = true; } this.rpIndex = tempArray.length; tempArray.push(new AjaxTiming(url, method, async, now())); open.call(this, method, url, async, user, password); }; xhr.send = function (data) { var this = this; var changeFunc = this.onreadystatechange; this.onreadystatechange = function (arg) { var request = tempArray[_this.rpIndex]; if (!request) { return; } var state = this.readyState; switch (state) { case 0: break; case 1: request.connectionEstablished = now(); break; case 2: request.requestReceived = now(); break; case 3: request.processingTime = now(); break; case 4: request.complete = now(); var hasResponse = !!(this.response && this.response != null && this.response != undefined); switch (this.responseType) { case "text": case "": if (typeof this.responseText == "string") { request.responseSize = this.responseText.length; } break; case "json": if (hasResponse && typeof this.response.toString == "function") { request.responseSize = this.response.toString().length; } break; case "arraybuffer": if (hasResponse && typeof this.response.byteLength == "number") { request.responseSize = this.response.byteLength; } break; case "blob": if (hasResponse && typeof this.response.size == "number") { request.responseSize = this.response.size; } break; case "document": break; } (function (req, arr) { setTimeout(function () { if (!hasPerformance) { return; } var url = req.url; var matches = new Array(); var entries = performance.getEntriesByType("resource"); for (var i = 0, entries_1 = entries; i < entries_1.length; i++) { var entry = entries_1[_i]; if (entry.name == url) { matches.push(entry); } } array.push(req); if (matches.length == 0) { return; } if (!used[url]) { used[url] = []; } if (matches.length == 1) { req.getPerformanceTimings(matches[0]); used[url].push(0); return; } var u = used[url]; for (var index in matches) { if (u.indexOf(index) != -1) { continue; } req.getPerformanceTimings(matches[index]); u.push(index); return; } req.getPerformanceTimings(matches[0]); }, compareEntriesDelay); })(request, array); break; } if (typeof changeFunc == "function") { changeFunc.call(_this, arg); } }; var request = tempArray[this.rpIndex]; if (!request) { return; } if (data && !isNaN(data.length)) { request.sendSize = data.length; } request.send = now(); send.call(this, data); }; }; this.recordPageLoad = function () { this.data.loadTime = (new Date()).getTime(); this.data.loadFired = true; }; this.addError = function (msg, url, lineNum) { this.data.jsCount++; var currError = ProfilerJsError.createText(msg, url, lineNum); var errorArr = this.data.jsErrors; for (var i = 0, errorArr_1 = errorArr; i < errorArr_1.length; i++) { var err = errorArr_1[_i]; if (err.getText() == currError) { err.count++; return; } } errorArr.push(new ProfilerJsError(msg, url, lineNum)); }; this.addInfo = function (infoType, key, value) { if (this.isNullOrEmpty(infoType)) { return; } if (this.isNullOrEmpty(value)) { this.info[infoType] = key; } else { if (this.isNullOrEmpty(key)) { return; } if (this.isNullOrEmpty(_this.info[infoType])) { this.info[infoType] = {}; } this.info[infoType][key] = value; } this.hasInsight = true; }; this.clearInfo = function () { this.info = {}; this.hasInsight = false; }; this.clearErrors = function () { this.data.jsCount = 0; this.data.jsErrors = []; }; this.clearAjax = function () { this.data.ajax = []; }; this.getInfo = function () { if (!this.hasInsight) { return null; } return this.info; }; this.getEventTimingHandler = function () { return this.eventsTimingHandler; }; this.getInputDelay = function () { return this.inputDelay; }; this.eventManager.add(WindowEvent.Load, window, this.recordPageLoad); var errorFunc = this.addError; this.startAjaxCapture(); function recordJsError(e) { var ev = e.target || e.srcElement; if (ev.nodeType == 3) { ev = ev.parentNode; } errorFunc("N/A", ev.src || ev.URL, -1); return false; } if (!!window["opera"]) { this.eventManager.add(WindowEvent.Error, document, recordJsError); } else if ("onerror" in window) { var origOnError = window.onerror; window.onerror = function (msg, url, lineNum) { errorFunc(msg, url, lineNum); if (!!origOnError) { return origOnError(msg, url, lineNum); } return false; }; } if (!!window["__cpCdnPath"]) { this.restUrl = window["__cpCdnPath"].trim(); } var protocol = window.location.protocol; var iframe = document.createElement("iframe"); var style = iframe.style; style.position = "absolute"; style.top = "-10000px"; style.left = "-1000px"; iframe.addEventListener('load', function (event) { var frame = event.currentTarget; if (frame && frame.contentDocument) { var iframeDocument = frame.contentDocument; var rumScript = iframeDocument.createElement('script'); rumScript.type = 'text/javascript'; rumScript.src = protocol + '//' + this.restUrl; iframeDocument.body.appendChild(rumScript); } }); var topScript = document.getElementsByTagName("script")[0]; topScript.parentNode.insertBefore(iframe, topScript); } RProfiler.prototype.isNullOrEmpty = function (val) { if (val === undefined || val === null) { return true; } if (typeof val == "string") { var str = val; return str.trim().length == 0; } return false; }; RProfiler.prototype.dispatchCustomEvent = function (event) { (function  { if (typeof w.CustomEvent === "function") { return false; } function CustomEvent(event, params) { params = params || { bubbles: false, cancelable: false, detail: undefined }; var evt = document.createEvent('CustomEvent'); evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail); return evt; } CustomEvent.prototype = Event.prototype; w.CustomEvent = CustomEvent; })(window); var e = new CustomEvent(event); window.dispatchEvent(e); }; return RProfiler; }()); var InputDelayHandler = (function () { function InputDelayHandler() { var this = this; this.firstInputDelay = 0; this.firstInputTimeStamp = 0; this.startTime = 0; this.delay = 0; this.profileManager = new ProfilerEventManager(); this.eventTypes = [ 'click', 'mousedown', 'keydown', 'touchstart', 'pointerdown', ]; this.addEventListeners = function () { this.eventTypes.forEach(function (event) { this.profileManager.add(event, document, this.onInput); }); }; this.now = function () { return (new Date()).getTime(); }; this.removeEventListeners = function () { this.eventTypes.forEach(function (event) { this.profileManager.remove(event, document, this.onInput); }); }; this.onInput = function (evt) { if (!evt.cancelable) { return; } var isEpochTime = evt.timeStamp > 1e12; this.firstInputTimeStamp = this.now(); var useFirstInputTime = isEpochTime || !window['performance']; var now = useFirstInputTime ? this.firstInputTimeStamp : window['performance'].now(); this.delay = now - evt.timeStamp; if (evt.type == 'pointerdown') { this.onPointerDown(); } else { this.removeEventListeners(); this.updateFirstInputDelay(); } }; this.onPointerUp = function () { this.removeEventListeners(); this.updateFirstInputDelay(); }; this.onPointerCancel = function () { this.removePointerEventListeners(); }; this.removePointerEventListeners = function () { this.profileManager.remove('pointerup', document, this.onPointerUp); this.profileManager.remove('pointercancel', document, this.onPointerCancel); }; this.updateFirstInputDelay = function () { if (this.delay >= 0 && this.delay < (this.firstInputTimeStamp - this.startTime)) { this.firstInputDelay = Math.round(_this.delay); } }; this.startSoftNavigationCapture = function () { this.resetSoftNavigationCapture(); }; this.resetSoftNavigationCapture = function () { this.resetFirstInputDelay(); this.addEventListeners(); }; this.resetFirstInputDelay = function () { this.delay = 0; this.firstInputDelay = 0; this.startTime = 0; this.firstInputTimeStamp = 0; }; this.startTime = this.now(); this.addEventListeners(); } InputDelayHandler.prototype.onPointerDown = function () { this.profileManager.add('pointerup', document, this.onPointerUp); this.profileManager.add('pointercancel', document, this.onPointerCancel); }; InputDelayHandler.prototype.getFirstInputDelay = function () { return this.firstInputDelay; }; return InputDelayHandler; }()); var EventsTimingHandler = (function () { function EventsTimingHandler() { var this = this; this.hiddenStrings = ['hidden', 'msHidden', 'webkitHidden', 'mozHidden']; this.visibilityStrings = [ 'visibilitychange', 'msvisibilitychange', 'webkitvisibilitychange', 'mozvisibilitychange' ]; this.captureSoftNavigation = false; this.hidden = 'hidden'; this.visibilityChange = 'visibilitychange'; this.visibilityEvents = []; this.eventManager = new ProfilerEventManager(); this.engagementTimeIntervalMs = 1000; this.engagementTime = 0; this.firstEngagementTime = 0; this.lastEventTimeStamp = 0; this.timeoutId = undefined; this.now = function () { return (new Date()).getTime(); }; this.startVisibilityCapture = function () { this.initializeVisibilityProperties(); document.addEventListener(_this.visibilityChange, this.captureFocusEvent, false); }; this.initializeVisibilityProperties = function () { var values = this.hiddenStrings; var propertyIndex = 0; for (var i = 0; i < values.length; i++) { if (typeof (document[values[i]]) !== 'undefined') { propertyIndex = i; } } this.visibilityChange = this.visibilityStrings[propertyIndex]; this.hidden = this.hiddenStrings[propertyIndex]; }; this.captureFocusEvent = function () { this.updateVisibilityChangeTime(); if (!document[_this.hidden]) { this.captureEngagementTime(); } }; this.updateVisibilityChangeTime = function () { if (document[_this.hidden]) { this.captureVisibilityEvent(VisibilityType.Blur); } else { this.captureVisibilityEvent(VisibilityType.Focus); } }; this.onBlur = function () { this.captureVisibilityEvent(VisibilityType.Blur); }; this.onFocus = function () { this.captureVisibilityEvent(VisibilityType.Focus); }; this.captureVisibilityEvent = function (type) { this.visibilityEvents.push({ type: type, time: this.now() }); }; this.captureEngagementTime = function (isFirstEngagement) { if (isFirstEngagement === void 0) { isFirstEngagement = true; } if (!this.lastEventTimeStamp) { this.engagementTime = this.engagementTimeIntervalMs; this.lastEventTimeStamp = this.now(); return; } var timeBetweenEvents = this.now() - this.lastEventTimeStamp; this.lastEventTimeStamp = this.now(); if (isFirstEngagement && this.firstEngagementTime === 0) { this.firstEngagementTime = this.now(); } if (timeBetweenEvents > 0 && timeBetweenEvents < this.engagementTimeIntervalMs) { clearTimeout(_this.timeoutId); this.engagementTime += timeBetweenEvents; return; } this.startTimer(); }; this.captureMouseMove = function () { this.captureEngagementTime(false); }; this.startTimer = function () { this.timeoutId = setTimeout(function () { this.engagementTime += this.engagementTimeIntervalMs; }, this.engagementTimeIntervalMs); }; this.getFocusAwayTime = function () { var events = this.visibilityEvents; var resetIndex = -1; if (events.length === 0) { return 0; } var currentBlurIndex = resetIndex; var index = 0; var currentFocusIndex = resetIndex; var hiddenTimeLapsed = 0; while (index < events.length) { if (events[index].type === VisibilityType.Blur && currentBlurIndex === resetIndex) { currentBlurIndex = index; } var isNewFocusEvent = currentFocusIndex === resetIndex && currentBlurIndex !== resetIndex; if (events[index].type === VisibilityType.Focus && isNewFocusEvent) { currentFocusIndex = index; } var validFocusChange = currentBlurIndex !== resetIndex && currentFocusIndex !== resetIndex; if (validFocusChange) { var diff = events[currentFocusIndex].time - events[currentBlurIndex].time; if (diff > 0) { hiddenTimeLapsed += diff; } currentBlurIndex = resetIndex; currentFocusIndex = resetIndex; } index = index + 1; } if (currentBlurIndex === (events.length - 1)) { hiddenTimeLapsed += this.now() - events[currentBlurIndex].time; } return hiddenTimeLapsed; }; this.getEngagementTime = function () { return this.engagementTime; }; this.getFirstEngagementTime = function () { return this.firstEngagementTime; }; this.startSoftNavigationCapture = function () { this.captureSoftNavigation = true; }; this.resetSoftNavigationCapture = function () { this.resetEngagementMetrics(); this.visibilityEvents = []; }; this.resetEngagementMetrics = function () { this.engagementTime = 0; this.lastEventTimeStamp = this.now(); this.firstEngagementTime = 0; }; this.clear = function () { this.eventManager.clear(); }; this.captureEngagementTime(false); this.eventManager.add('scroll', document, this.captureEngagementTime); this.eventManager.add('resize', window, this.captureEngagementTime); this.eventManager.add('mouseup', document, this.captureEngagementTime); this.eventManager.add('keyup', document, this.captureEngagementTime); this.eventManager.add('mousemove', document, this.captureMouseMove); this.eventManager.add('focus', window, this.onFocus); this.eventManager.add('blur', window, this.onBlur); this.eventManager.add('focus', document, this.onFocus); this.eventManager.add('blur', document, this.onBlur); } return EventsTimingHandler; }()); var profiler = new RProfiler(); window["RProfiler"] = profiler; window["WindowEvent"] = WindowEvent; profiler.dispatchCustomEvent("GlimpseLoaded");
</script>



</body>
</html>
